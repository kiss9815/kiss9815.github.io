---
title: "java memory 구조"
categories:
  - java-core
last_modified_at: 2019-02-13T13:00:00+09:00
toc: true
tags: # 태그 사용
    - java memory

---


## 자바 메모리 구조
자바의 메모리 구조는 크게
1. 메소드 영역(클래스 영역)
2. 힙 영역
3. 스택 영역
으로 되어 있다.

## 1. 메소드 영역
클래스 파일의 바이트 코드가 로드되는 곳이다.
클래스와 static 변수가 메소드 영역에 올라온다.
어떤 메소드가 호출될 때 그 메소드가 가지고 있는 클래스 파일이 메모리에 로딩되어 있어야 함(__클래스로딩__ ) -> .class 파일을 찾아서 메모리에 로딩

### 클래스 로딩을 위한 JVM 로딩 절차
1. 어떤 메소드를 호출하는 문장을 만났는데, 그 메소드를 가진 클래스 바이트코드가 아직 로딩된 적이없다면, 곧바로 JVM은 JRE라이브러리 폴더에서 클래스를 찾음.
2. 없으면, CLASSPATH 환경변수에 지정된 폴더에서 클래스를 찾음.
3. 찾았으면 그 클래스 파일이 올바른지 바이트코드를 검증한다.
4. 올바른 바이트코드라면 메소드영역으로 파일을 로딩한다.
5. 클래스 변수를 만들라는 명령어가 있으면 메소드 영역에 그 변수를 준비한다.
6. 클래스 블록이 있으면 순서대로 그 블록을 실행한다.
7. 이렇게 한번 클래스의 바이트코드가 로딩되면 JVM이 종료될때까지 유지된다.

## 2. 스택 영역
지역변수와 매개변수가 저장된다.
참조변수에 저장되는 메모리 주소는 스택 영역에 저장된다.
__지역변수__ 값은 해당 메소드 실행되면 그 메소드의 스택번지에 값이 저장되고, 메소드 실행이 끝나면 스택에서 해당메소드 스택번지가 제거되는 구조

## 3. 힙 영역
new 명령어로 생성된 인스턴스는 모두 힙 영역에 놓인다.
메소드가 호출 되어도 사라지지 않고, 가비지 컬렉션 및 JVM 종료될때까지 남아 있다.

![jvm memory](/assets/image/jvm메모리.jpg)


참고문헌
> https://wanzargen.tistory.com/16?category=700063
> https://wanzargen.tistory.com/17
> https://hoonmaro.tistory.com/19
